<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	
	<resultMap type="Goods" id="goods_rm">
	    <id property="goodsNo" column="GOODS_NO"/>
	    <result property="userNo" column="USER_NO"/>
	    <result property="categoryNo" column="CATEGORY_NO"/>
	    <result property="goodsTitle" column="GOODS_TITLE"/>
	    <result property="goodsDescr" column="GOODS_DESCR"/>
	    <result property="goodsPrice" column="GOODS_PRICES"/>
	    <result property="viewCount" column="VIEW_COUNT"/>
	    <result property="enrollDate" column="SELL_ENROLL_DT"/>
	    <result property="goodsStatus" column="GOODS_STATUS"/>
	</resultMap>
	
	<resultMap type="Category" id="category_rm">
		<id property="categoryNo" column="CATEGORY_NO"/>
		<result property="categoryName" column="CATEGORY_NAME"/>
	</resultMap>
	
	<select id="selectCategory" resultMap="category_rm">
		SELECT *
		FROM categories
		WHERE CATEGORY_NO = #{categoryNo}	
	</select>
	
	<select id="selectGoodsList" resultMap="goods_rm">
		SELECT *
		FROM goods
		<choose>
			<when test="categoryNo == 100">
				WHERE CATEGORY_NO BETWEEN 100 AND 200
			</when>
			<when test="categoryNo == 200">
				WHERE CATEGORY_NO BETWEEN 200 AND 300
			</when>
			<when test="categoryNo == 300">
				<!-- none -->
			</when>
			<otherwise>
				WHERE CATEGORY_NO = #{categoryNo}
			</otherwise>
		</choose>
		ORDER BY GOODS_NO DESC
	</select>
	
	<select id="selectGoodsDetail" resultMap="goods_rm">
		SELECT *
		FROM goods
		WHERE GOODS_NO = #{goodsNo}
	</select>
	
	<insert id="insertGoods" parameterType="goods">
		INSERT INTO goods
		(USER_NO, CATEGORY_NO, GOODS_TITLE, GOODS_DESCR, GOODS_PRICES)
		VALUES
		(#{userNo}, #{categoryNo}, #{goodsTitle}, #{goodsDescr}, #{goodsPrice})
	</insert>
	
	<select id="selectManageList" resultMap="goods_rm">
		SELECT *
		FROM goods
		WHERE USER_NO = #{userNo}
	</select>
	
</mapper>









